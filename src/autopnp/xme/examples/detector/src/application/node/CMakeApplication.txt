#
# Copyright (c) 2011-2014, fortiss GmbH.
# Licensed under the Apache License, Version 2.0.
# 
# Use, modification and distribution are subject to the terms specified
# in the accompanying license file LICENSE.txt located at the root directory
# of this software distribution. A copy is available at
# http://chromosome.fortiss.org/.
#
# This file is part of CHROMOSOME.
#
# $Id: CMakeApplication.txt 7574 2014-02-25 08:48:30Z wiesmueller $
#         This file has been generated by the CHROMOSOME Modeling Tool (XMT)
#         (fortiss GmbH).

cmake_minimum_required (VERSION 2.6)

if (NOT NODE_NAME)
    xme_message (FATAL_ERROR "Variable \"NODE_NAME\" not defined!")
endif ()

# Include components
xme_add_subdirectory ("../../detector/adv/detector")
xme_add_subdirectory ("../../detector/adv/device")
xme_add_subdirectory ("../../detector/adv/logger")

# Include waypoints
xme_add_component (
    "xme_wp_marshal_marshaler-gen"
    HEADERS
        "../../xme/wp/marshal/include-gen/marshaler.h"
        "../../xme/wp/marshal/include-gen/marshalerFunctionWrapper.h"
    SOURCES
        "../../xme/wp/marshal/src-gen/marshaler.c"
        "../../xme/wp/marshal/src-gen/marshalerFunctionWrapper.c"
    DEPENDS
        xme_wp_marshal_marshaler
)
xme_add_component (
    "xme_wp_marshal_demarshaler-gen"
    HEADERS
        "../../xme/wp/marshal/include-gen/demarshaler.h"
        "../../xme/wp/marshal/include-gen/demarshalerFunctionWrapper.h"
    SOURCES
        "../../xme/wp/marshal/src-gen/demarshaler.c"
        "../../xme/wp/marshal/src-gen/demarshalerFunctionWrapper.c"
    DEPENDS
        xme_wp_marshal_demarshaler
)

# Set up sources and headers
set (
    SOURCES
    node.c
    
    # PROTECTED REGION ID(APPLICATION_NODE_CMAKELISTS_TXT_SOURCES) ENABLED START
    
    # PROTECTED REGION END
)

set (
    HEADERS
    ../../detector/topic/dictionaryData.h
    ../../detector/topic/dictionary.h
    
    # PROTECTED REGION ID(APPLICATION_NODE_CMAKELISTS_TXT_HEADERS) ENABLED START
    
    # PROTECTED REGION END
)

# Define target
xme_add_executable (
    "${NODE_NAME}"
    ${SOURCES}
    ${HEADERS}
    # PROTECTED REGION ID(APPLICATION_NODE_CMAKELISTS_TXT_EXECUTABLE) ENABLED START
    
    # PROTECTED REGION END
)

# PROTECTED REGION ID(APPLICATION_NODE_CMAKELISTS_TXT_ADDITIONAL) ENABLED START

# PROTECTED REGION END

# Build XME components
xme_link_components (
    "${NODE_NAME}"
    detector_adv_detector
    detector_adv_device
    detector_adv_logger
    xme_core_broker
    xme_core_dataHandler
    xme_core_directory_attribute
    xme_core_directory_topicRegistry
    xme_core_executionManager
    xme_core_login_loginClient
    xme_core_login_loginManager
    xme_core_node
    xme_core_nodeManager_componentRepository
    xme_core_pnp_plugAndPlayClient
    xme_core_pnp_plugAndPlayManager
    xme_hal_cmdLine
    xme_hal_env
    xme_wp_channel_channelInjector
    xme_wp_channel_channelSelector
    xme_wp_marshal_demarshaler
    xme_wp_marshal_demarshaler-gen
    xme_wp_marshal_marshaler
    xme_wp_marshal_marshaler-gen
    xme_wp_udp_udpReceive
    xme_wp_udp_udpSend
)

# PROTECTED REGION ID(APPLICATION_NODE_CMAKELISTS_TXT_ADDITIONAL_2) ENABLED START

# PROTECTED REGION END

# Build documentation
xme_build_documentation (
    "${NODE_NAME}"
    TARGET "node_doc"
    OUTPUT_NAME "${NODE_NAME}.chm"
    INSTALL_DIR ${CMAKE_CURRENT_SOURCE_DIR}
    #AUTO
    CLEAN
    FILES ${SOURCES} ${HEADERS}
)
